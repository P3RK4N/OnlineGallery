<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Online Gallery: Program.cs File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Online Gallery<span id="projectnumber">&#160;1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('_program_8cs.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">Program.cs File Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_photo.html">Photo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_gallery_identity_user.html">GalleryIdentityUser</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_simple_db_context.html">SimpleDbContext</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a0bac5bd15e2750f544e20e0834b93610" id="r_a0bac5bd15e2750f544e20e0834b93610"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#a0bac5bd15e2750f544e20e0834b93610">User</a> = <a class="el" href="class_gallery_identity_user.html">GalleryIdentityUser</a></td></tr>
<tr class="separator:a0bac5bd15e2750f544e20e0834b93610"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ca9619f91e473fb258c492b4e6c658e" id="r_a2ca9619f91e473fb258c492b4e6c658e"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#a2ca9619f91e473fb258c492b4e6c658e">Role</a> = Microsoft.AspNetCore.Identity.IdentityRole</td></tr>
<tr class="separator:a2ca9619f91e473fb258c492b4e6c658e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39c5fabe9c10f33b72a1835a4f3c2d62" id="r_a39c5fabe9c10f33b72a1835a4f3c2d62"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#a39c5fabe9c10f33b72a1835a4f3c2d62">DbContext</a> = <a class="el" href="class_simple_db_context.html">SimpleDbContext</a></td></tr>
<tr class="separator:a39c5fabe9c10f33b72a1835a4f3c2d62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6107bcfbdae76cad8ed933c6a9058d6" id="r_ae6107bcfbdae76cad8ed933c6a9058d6"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> = Microsoft.AspNetCore.Identity.UserManager&lt; <a class="el" href="class_gallery_identity_user.html">GalleryIdentityUser</a> &gt;</td></tr>
<tr class="separator:ae6107bcfbdae76cad8ed933c6a9058d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13515bc8f9c48f16e3182807bc260e15" id="r_a13515bc8f9c48f16e3182807bc260e15"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#a13515bc8f9c48f16e3182807bc260e15">RoleManager</a> = Microsoft.AspNetCore.Identity.RoleManager&lt; Microsoft.AspNetCore.Identity.IdentityRole &gt;</td></tr>
<tr class="separator:a13515bc8f9c48f16e3182807bc260e15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36bfdee1eb2c27cb0f5c276baaf70494" id="r_a36bfdee1eb2c27cb0f5c276baaf70494"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#a36bfdee1eb2c27cb0f5c276baaf70494">SignInManager</a> = Microsoft.AspNetCore.Identity.SignInManager&lt; <a class="el" href="class_gallery_identity_user.html">GalleryIdentityUser</a> &gt;</td></tr>
<tr class="separator:a36bfdee1eb2c27cb0f5c276baaf70494"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a78451888107c62d4fb56848dfa61cdb7" id="r_a78451888107c62d4fb56848dfa61cdb7"><td class="memItemLeft" align="right" valign="top">builder.Services.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#a78451888107c62d4fb56848dfa61cdb7">AddHttpLogging</a> (options=&gt; { options.LoggingFields=HttpLoggingFields.RequestProperties;}) .AddDbContext&lt; <a class="el" href="_program_8cs.html#a39c5fabe9c10f33b72a1835a4f3c2d62">DbContext</a> &gt;(options</td></tr>
<tr class="separator:a78451888107c62d4fb56848dfa61cdb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2e530ff170a424ae90d56b462193dec" id="r_af2e530ff170a424ae90d56b462193dec"><td class="memItemLeft" align="right" valign="top">builder.Services.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#af2e530ff170a424ae90d56b462193dec">AddSwaggerGen</a> (options=&gt; { options.SwaggerDoc(&quot;v1&quot;, new OpenApiInfo{ Title=&quot;Online Gallery&quot;, Version=&quot;v1&quot; });})</td></tr>
<tr class="separator:af2e530ff170a424ae90d56b462193dec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e515a27bc8d2c3d2fb6fbdb46c5f470" id="r_a9e515a27bc8d2c3d2fb6fbdb46c5f470"><td class="memItemLeft" align="right" valign="top">builder.Services.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#a9e515a27bc8d2c3d2fb6fbdb46c5f470">AddAuthentication</a> (CookieAuthenticationDefaults.AuthenticationScheme) .AddCookie(options</td></tr>
<tr class="separator:a9e515a27bc8d2c3d2fb6fbdb46c5f470"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0412687b26e13339ceaf4af6f9ae436a" id="r_a0412687b26e13339ceaf4af6f9ae436a"><td class="memItemLeft" align="right" valign="top">builder.Logging.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#a0412687b26e13339ceaf4af6f9ae436a">AddFilter</a> (&quot;Microsoft.AspNetCore.HttpLogging&quot;, LogLevel.Information)</td></tr>
<tr class="separator:a0412687b26e13339ceaf4af6f9ae436a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa87899a7e0d5fc705f3bba25f807861b" id="r_aa87899a7e0d5fc705f3bba25f807861b"><td class="memItemLeft" align="right" valign="top">application.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#aa87899a7e0d5fc705f3bba25f807861b">UseHttpLogging</a> () .UseSwagger() .UseSwaggerUI(options</td></tr>
<tr class="separator:aa87899a7e0d5fc705f3bba25f807861b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab688d13d545b936a2774fd43c0f2f578" id="r_ab688d13d545b936a2774fd43c0f2f578"><td class="memItemLeft" align="right" valign="top">application.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#ab688d13d545b936a2774fd43c0f2f578">MapGet</a> (&quot;/&quot;, async(HttpContext context, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> userManager)=&gt; { if(context.User.Identity==null||!context.User.Identity.IsAuthenticated) { return &quot;[Anonymous] Home&quot;;} var user=await userManager.GetUserAsync(context.User);return user==null ? &quot;[Anonymous] Home&quot; :$&quot;[{user.UserName}] Home&quot;;})</td></tr>
<tr class="separator:ab688d13d545b936a2774fd43c0f2f578"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56b2e9dceab4023c4f1c9fe69608fe33" id="r_a56b2e9dceab4023c4f1c9fe69608fe33"><td class="memItemLeft" align="right" valign="top">application.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#a56b2e9dceab4023c4f1c9fe69608fe33">MapGet</a> (&quot;/user/login&quot;,()=&gt; &quot;Hello login!&quot;)</td></tr>
<tr class="separator:a56b2e9dceab4023c4f1c9fe69608fe33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa89a6f7a6c9be7e31f9e63413364273c" id="r_aa89a6f7a6c9be7e31f9e63413364273c"><td class="memItemLeft" align="right" valign="top">application.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#aa89a6f7a6c9be7e31f9e63413364273c">MapGet</a> (&quot;/user/register&quot;,()=&gt; &quot;Hello register!&quot;)</td></tr>
<tr class="separator:aa89a6f7a6c9be7e31f9e63413364273c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bb68c1364de4dba6b1620966d499d54" id="r_a0bb68c1364de4dba6b1620966d499d54"><td class="memItemLeft" align="right" valign="top">application.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#a0bb68c1364de4dba6b1620966d499d54">MapPost</a> (&quot;/user/register&quot;, async(HttpContext context, <a class="el" href="_program_8cs.html#a13515bc8f9c48f16e3182807bc260e15">RoleManager</a> roleManager, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> userManager)=&gt; { var username=context.Request.Form[&quot;username&quot;];var password=context.Request.Form[&quot;password&quot;];if(StringValues.IsNullOrEmpty(username)||StringValues.IsNullOrEmpty(password)) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync(&quot;Registration failed!&quot;);return;} var user=new <a class="el" href="_program_8cs.html#a0bac5bd15e2750f544e20e0834b93610">User</a> { UserName=username };var result=await userManager.CreateAsync(user, password);if(result.Succeeded) { await context.Response.WriteAsync(&quot;User Registered Successfully!&quot;);} else { context.Response.StatusCode=400;await context.Response.WriteAsync(&quot;User registration failed:\n\t - &quot;+string.Join(&quot;\n\t - &quot;, result.Errors.Select(e=&gt; e.Description)));};})</td></tr>
<tr class="separator:a0bb68c1364de4dba6b1620966d499d54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21c27872755e13081d1db2efaf4689f0" id="r_a21c27872755e13081d1db2efaf4689f0"><td class="memItemLeft" align="right" valign="top">application.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#a21c27872755e13081d1db2efaf4689f0">MapPost</a> (&quot;/user/login&quot;, async(HttpContext context, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a>, <a class="el" href="_program_8cs.html#a36bfdee1eb2c27cb0f5c276baaf70494">SignInManager</a> signInManager)=&gt; { var username=context.Request.Form[&quot;username&quot;];var password=context.Request.Form[&quot;password&quot;];if(StringValues.IsNullOrEmpty(username)||StringValues.IsNullOrEmpty(password)) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync(&quot;Log in failed!&quot;);return;} var user=await UserManager.FindByNameAsync(username);if(user==null) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync(&quot;Log in failed!&quot;);return;} var result=await signInManager.PasswordSignInAsync(user, password, false, false);if(result.Succeeded) { context.Response.StatusCode=StatusCodes.Status200OK;context.Response.Redirect(&quot;/user&quot;);} else { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync(&quot;Log in failed!&quot;);} })</td></tr>
<tr class="separator:a21c27872755e13081d1db2efaf4689f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7d912025db8547b4d7b1e071713f133" id="r_ae7d912025db8547b4d7b1e071713f133"><td class="memItemLeft" align="right" valign="top">application.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#ae7d912025db8547b4d7b1e071713f133">MapPost</a> (&quot;/user/logout&quot;, async(HttpContext context, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> userManager, <a class="el" href="_program_8cs.html#a36bfdee1eb2c27cb0f5c276baaf70494">SignInManager</a> signInManager)=&gt; { if(context.User.Identity==null||!context.User.Identity.IsAuthenticated) { context.Response.StatusCode=StatusCodes.Status400BadRequest;return &quot;Already logged out!&quot;;} var user=await userManager.GetUserAsync(context.User);if(user==null) { context.Response.StatusCode=StatusCodes.Status400BadRequest;return &quot;Already logged out!&quot;;} await signInManager.SignOutAsync();return &quot;Logged out successfully!&quot;;})</td></tr>
<tr class="separator:ae7d912025db8547b4d7b1e071713f133"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5f65acedf592f7ee86ef26cb6ddb217" id="r_aa5f65acedf592f7ee86ef26cb6ddb217"><td class="memItemLeft" align="right" valign="top">application.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#aa5f65acedf592f7ee86ef26cb6ddb217">MapGet</a> (&quot;/user&quot;, async(HttpContext context, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> userManager)=&gt; { if(context.User.Identity==null||!context.User.Identity.IsAuthenticated) { context.Response.Redirect(&quot;/user/login&quot;);return;} var user=await userManager.GetUserAsync(context.User);if(user==null) { context.Response.Redirect(&quot;/user/login&quot;);return;} context.Response.Redirect($&quot;/users/{user.UserName}&quot;);})</td></tr>
<tr class="separator:aa5f65acedf592f7ee86ef26cb6ddb217"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8df212bda1108c6c77af0004a27a9131" id="r_a8df212bda1108c6c77af0004a27a9131"><td class="memItemLeft" align="right" valign="top">application.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#a8df212bda1108c6c77af0004a27a9131">MapGet</a> (&quot;/users&quot;, async(HttpContext context, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> userManager)=&gt; { var users=await userManager.Users.ToListAsync();await context.Response.WriteAsJsonAsync(users);})</td></tr>
<tr class="separator:a8df212bda1108c6c77af0004a27a9131"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd0af5fa5cc8a8d60b2e1ccbd7ccc6c9" id="r_afd0af5fa5cc8a8d60b2e1ccbd7ccc6c9"><td class="memItemLeft" align="right" valign="top">application.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#afd0af5fa5cc8a8d60b2e1ccbd7ccc6c9">MapGet</a> (&quot;/users/{username}&quot;, async(string username, HttpContext context, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> userManager)=&gt; { var users=await userManager.Users.Where(u=&gt; u.UserName==username).ToListAsync();if(users.Count==0) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync($&quot;User {username} does not exist!&quot;);return;} await context.Response.WriteAsJsonAsync(users[0]);})</td></tr>
<tr class="separator:afd0af5fa5cc8a8d60b2e1ccbd7ccc6c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77287ade3bfe9343303ed0e1148f3079" id="r_a77287ade3bfe9343303ed0e1148f3079"><td class="memItemLeft" align="right" valign="top">application.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#a77287ade3bfe9343303ed0e1148f3079">MapGet</a> (&quot;/users/{username}/photos&quot;, async(string username, HttpContext context, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> userManager, <a class="el" href="_program_8cs.html#a39c5fabe9c10f33b72a1835a4f3c2d62">DbContext</a> dbContext)=&gt; { var users=await userManager.Users.Where(u=&gt; u.UserName==username).ToListAsync();if(users.Count==0) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync($&quot;User {username} does not exist!&quot;);return;} var photos=dbContext.Pictures.Where(p=&gt; p.UserId==users[0].Id).ToList().ConvertAll(p=&gt; new <a class="el" href="_program_8cs.html#a76e5aa3374c7212ebcd368b03d2d0d5e">PhotoDTO</a> { Id=p.Id, userId=p.UserId, content=p.Content, contentType=p.ContentType, fileName=p.FileName });await context.Response.WriteAsJsonAsync(photos);})</td></tr>
<tr class="separator:a77287ade3bfe9343303ed0e1148f3079"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f40c2c8a9812b3e84528a9944763c31" id="r_a1f40c2c8a9812b3e84528a9944763c31"><td class="memItemLeft" align="right" valign="top">application.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#a1f40c2c8a9812b3e84528a9944763c31">MapGet</a> (&quot;/photos&quot;, async(HttpContext context, <a class="el" href="_program_8cs.html#a39c5fabe9c10f33b72a1835a4f3c2d62">DbContext</a> dbContext)=&gt; { var photos=dbContext.Pictures.ToList().ConvertAll(p=&gt; new <a class="el" href="_program_8cs.html#a76e5aa3374c7212ebcd368b03d2d0d5e">PhotoDTO</a> { Id=p.Id, userId=p.UserId, content=p.Content, contentType=p.ContentType, fileName=p.FileName });await context.Response.WriteAsJsonAsync(photos);})</td></tr>
<tr class="separator:a1f40c2c8a9812b3e84528a9944763c31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ee9fbe9ac10789e06a218e70d2d1227" id="r_a8ee9fbe9ac10789e06a218e70d2d1227"><td class="memItemLeft" align="right" valign="top">application.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#a8ee9fbe9ac10789e06a218e70d2d1227">MapGet</a> (&quot;/photos/{photoID}&quot;, async(int photoID, HttpContext context, <a class="el" href="_program_8cs.html#a39c5fabe9c10f33b72a1835a4f3c2d62">DbContext</a> dbContext)=&gt; { var photo=await dbContext.Pictures.Where(p=&gt; p.Id==photoID).ToListAsync();if(photo.Count==0) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync($&quot;Photo with id: {photoID} does not exist!&quot;);return;} using(var ms=new MemoryStream(photo[0].Content)) { context.Response.ContentType=photo[0].ContentType;await ms.CopyToAsync(context.Response.Body);} })</td></tr>
<tr class="separator:a8ee9fbe9ac10789e06a218e70d2d1227"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3771d369156388267bf09d253b984138" id="r_a3771d369156388267bf09d253b984138"><td class="memItemLeft" align="right" valign="top">application.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#a3771d369156388267bf09d253b984138">MapGet</a> (&quot;/photos/{photoID}/user&quot;, async(int photoID, HttpContext context, <a class="el" href="_program_8cs.html#a39c5fabe9c10f33b72a1835a4f3c2d62">DbContext</a> dbContext)=&gt; { var photoUserId=await dbContext.Pictures.Where(p=&gt; p.Id==photoID).Select(p=&gt; p.UserId).ToListAsync();if(photoUserId.Count==0) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync($&quot;Photo with id: {photoID} does not exist!&quot;);return;} var photoUser=await dbContext.Users.Where(u=&gt; u.Id==photoUserId[0]).ToListAsync();await context.Response.WriteAsJsonAsync(photoUser);})</td></tr>
<tr class="separator:a3771d369156388267bf09d253b984138"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8308c6d187a2ee938790a7066b93447" id="r_ae8308c6d187a2ee938790a7066b93447"><td class="memItemLeft" align="right" valign="top">application.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#ae8308c6d187a2ee938790a7066b93447">MapPost</a> (&quot;/user/update&quot;, async(HttpContext context, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> userManager, <a class="el" href="_program_8cs.html#a39c5fabe9c10f33b72a1835a4f3c2d62">DbContext</a> dbContext)=&gt; { if(context.User.Identity==null||!context.User.Identity.IsAuthenticated) { context.Response.StatusCode=StatusCodes.Status403Forbidden;await context.Response.WriteAsync($&quot;User update failed!&quot;);return;} var user=await userManager.GetUserAsync(context.User);if(user==null) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync($&quot;User update failed!&quot;);return;} var username=context.Request.Form[&quot;username&quot;];if(StringValues.IsNullOrEmpty(username)) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync(&quot;User update failed!&quot;);return;} else if(username==user.UserName||dbContext.Users.Where(u=&gt; u.UserName==username).Count() &gt; 0) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync(&quot;User update failed!&quot;);return;} user.UserName=username;dbContext.Update(user);await dbContext.SaveChangesAsync();await context.Response.WriteAsync(&quot;Username successfully updated!&quot;);})</td></tr>
<tr class="separator:ae8308c6d187a2ee938790a7066b93447"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b11cc6ba5b37f63a1a74cff86a73a69" id="r_a3b11cc6ba5b37f63a1a74cff86a73a69"><td class="memItemLeft" align="right" valign="top">application.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#a3b11cc6ba5b37f63a1a74cff86a73a69">MapPost</a> (&quot;/user/delete&quot;, async(HttpContext context, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> userManager, <a class="el" href="_program_8cs.html#a39c5fabe9c10f33b72a1835a4f3c2d62">DbContext</a> dbContext)=&gt; { if(context.User.Identity==null||!context.User.Identity.IsAuthenticated) { context.Response.StatusCode=StatusCodes.Status403Forbidden;await context.Response.WriteAsync($&quot;User delete failed!&quot;);return;} var user=await userManager.GetUserAsync(context.User);if(user==null) { context.Response.StatusCode=StatusCodes.Status403Forbidden;await context.Response.WriteAsync($&quot;User delete failed!&quot;);return;} await dbContext.Entry(user).Collection(u=&gt; u.Pictures).LoadAsync();var result=await userManager.DeleteAsync(user);if(result.Succeeded) { await dbContext.SaveChangesAsync();await context.Response.WriteAsync(&quot;User deleted Successfully!&quot;);} else { context.Response.StatusCode=400;await context.Response.WriteAsync(&quot;User deletion failed:\n\t - &quot;+string.Join(&quot;\n\t - &quot;, result.Errors.Select(e=&gt; e.Description)));};})</td></tr>
<tr class="separator:a3b11cc6ba5b37f63a1a74cff86a73a69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30bd0f3af6d42569507b1ab6795afeb9" id="r_a30bd0f3af6d42569507b1ab6795afeb9"><td class="memItemLeft" align="right" valign="top">application.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#a30bd0f3af6d42569507b1ab6795afeb9">MapPost</a> (&quot;/photos/{photoName}/create&quot;, async(string photoName, HttpContext context, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> userManager, <a class="el" href="_program_8cs.html#a39c5fabe9c10f33b72a1835a4f3c2d62">DbContext</a> dbContext)=&gt; { if(context.User.Identity==null||!context.User.Identity.IsAuthenticated) { context.Response.StatusCode=StatusCodes.Status403Forbidden;await context.Response.WriteAsync($&quot;Photo creation failed!&quot;);return;} var user=await userManager.GetUserAsync(context.User);if(user==null) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync($&quot;Photo creation failed!&quot;);return;} if(context.Request.ContentLength==null||context.Request.ContentType==null) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync($&quot;Photo creation failed!&quot;);return;} using(var ms=new MemoryStream()) { await context.Request.Body.CopyToAsync(ms);var content=ms.ToArray();<a class="el" href="class_photo.html">Photo</a> pic=new <a class="el" href="class_photo.html">Photo</a>(user, photoName, content, context.Request.ContentType);dbContext.Add(pic);user.Pictures.Add(pic);await dbContext.SaveChangesAsync();await context.Response.WriteAsync($&quot;Photo {photoName} successfully created!&quot;);} })</td></tr>
<tr class="separator:a30bd0f3af6d42569507b1ab6795afeb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7bf11b36845cb42b98150d78f224961" id="r_ac7bf11b36845cb42b98150d78f224961"><td class="memItemLeft" align="right" valign="top">application.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#ac7bf11b36845cb42b98150d78f224961">MapPost</a> (&quot;/photos/{photoID}/update&quot;, async(int photoID, HttpContext context, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> userManager, <a class="el" href="_program_8cs.html#a39c5fabe9c10f33b72a1835a4f3c2d62">DbContext</a> dbContext)=&gt; { if(context.User.Identity==null||!context.User.Identity.IsAuthenticated) { context.Response.StatusCode=StatusCodes.Status403Forbidden;await context.Response.WriteAsync($&quot;Photo update forbidden!&quot;);return;} var user=await userManager.GetUserAsync(context.User);if(user==null) { context.Response.StatusCode=StatusCodes.Status403Forbidden;await context.Response.WriteAsync($&quot;Photo update forbidden!&quot;);return;} if(context.Request.ContentLength==null||context.Request.ContentType==null) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync($&quot;Photo update failed!&quot;);return;} var pic=await dbContext.Pictures.Where(p=&gt; p.Id==photoID).FirstOrDefaultAsync();if(pic==null) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync($&quot;Photo does not exist!&quot;);return;} if(pic.UserId !=user.Id) { context.Response.StatusCode=StatusCodes.Status403Forbidden;await context.Response.WriteAsync($&quot;Photo update forbidden!&quot;);return;} using(var ms=new MemoryStream()) { await context.Request.Body.CopyToAsync(ms);pic.Content=ms.ToArray();pic.ContentType=context.Request.ContentType;dbContext.Update(pic);await dbContext.SaveChangesAsync();await context.Response.WriteAsync($&quot;Photo {pic.FileName} successfully updated!&quot;);} })</td></tr>
<tr class="separator:ac7bf11b36845cb42b98150d78f224961"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1abf692cc4c9ea3f246c78f6f7bbd307" id="r_a1abf692cc4c9ea3f246c78f6f7bbd307"><td class="memItemLeft" align="right" valign="top">application.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#a1abf692cc4c9ea3f246c78f6f7bbd307">MapPost</a> (&quot;/photos/{photoID}/delete&quot;, async(int photoID, HttpContext context, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> userManager, <a class="el" href="_program_8cs.html#a39c5fabe9c10f33b72a1835a4f3c2d62">DbContext</a> dbContext)=&gt; { if(context.User.Identity==null||!context.User.Identity.IsAuthenticated) { context.Response.StatusCode=StatusCodes.Status403Forbidden;await context.Response.WriteAsync($&quot;Photo deletion failed!&quot;);return;} var user=await userManager.GetUserAsync(context.User);if(user==null) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync($&quot;Photo deletion failed!&quot;);return;} var photos=await dbContext.Pictures.Where(p=&gt; p.Id==photoID).ToListAsync();if(photos.Count==0) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync($&quot;Photo {photoID} deletion failed!&quot;);return;} else if(photos.Count &gt; 1||photos[0].UserId !=user.Id) { context.Response.StatusCode=StatusCodes.Status403Forbidden;await context.Response.WriteAsync($&quot;Photo {photoID} deletion forbidden!&quot;);return;} dbContext.Pictures.RemoveRange(photos);await dbContext.SaveChangesAsync();await context.Response.WriteAsync($&quot;Photo {photoID} deleted!&quot;);})</td></tr>
<tr class="separator:a1abf692cc4c9ea3f246c78f6f7bbd307"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2c5618318260608a562239c7a326f88" id="r_ae2c5618318260608a562239c7a326f88"><td class="memItemLeft" align="right" valign="top">application.&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#ae2c5618318260608a562239c7a326f88">Run</a> ()</td></tr>
<tr class="separator:ae2c5618318260608a562239c7a326f88"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2f78352277081c620fd4cf92a5ce15e5" id="r_a2f78352277081c620fd4cf92a5ce15e5"><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#a2f78352277081c620fd4cf92a5ce15e5">builder</a> = WebApplication.CreateBuilder(args)</td></tr>
<tr class="separator:a2f78352277081c620fd4cf92a5ce15e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab20294faa737ddf2b8a2446f796e491b" id="r_ab20294faa737ddf2b8a2446f796e491b"><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#ab20294faa737ddf2b8a2446f796e491b">application</a> = builder.Build()</td></tr>
<tr class="separator:ab20294faa737ddf2b8a2446f796e491b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76e5aa3374c7212ebcd368b03d2d0d5e" id="r_a76e5aa3374c7212ebcd368b03d2d0d5e"><td class="memItemLeft" align="right" valign="top">record&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_program_8cs.html#a76e5aa3374c7212ebcd368b03d2d0d5e">PhotoDTO</a></td></tr>
<tr class="separator:a76e5aa3374c7212ebcd368b03d2d0d5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a39c5fabe9c10f33b72a1835a4f3c2d62" name="a39c5fabe9c10f33b72a1835a4f3c2d62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39c5fabe9c10f33b72a1835a4f3c2d62">&#9670;&#160;</a></span>DbContext</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="_program_8cs.html#a39c5fabe9c10f33b72a1835a4f3c2d62">DbContext</a> =  <a class="el" href="class_simple_db_context.html">SimpleDbContext</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2ca9619f91e473fb258c492b4e6c658e" name="a2ca9619f91e473fb258c492b4e6c658e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ca9619f91e473fb258c492b4e6c658e">&#9670;&#160;</a></span>Role</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="_program_8cs.html#a2ca9619f91e473fb258c492b4e6c658e">Role</a> =  Microsoft.AspNetCore.Identity.IdentityRole</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a13515bc8f9c48f16e3182807bc260e15" name="a13515bc8f9c48f16e3182807bc260e15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13515bc8f9c48f16e3182807bc260e15">&#9670;&#160;</a></span>RoleManager</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="_program_8cs.html#a13515bc8f9c48f16e3182807bc260e15">RoleManager</a> =  Microsoft.AspNetCore.Identity.RoleManager&lt;Microsoft.AspNetCore.Identity.IdentityRole&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a36bfdee1eb2c27cb0f5c276baaf70494" name="a36bfdee1eb2c27cb0f5c276baaf70494"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36bfdee1eb2c27cb0f5c276baaf70494">&#9670;&#160;</a></span>SignInManager</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="_program_8cs.html#a36bfdee1eb2c27cb0f5c276baaf70494">SignInManager</a> =  Microsoft.AspNetCore.Identity.SignInManager&lt;<a class="el" href="class_gallery_identity_user.html">GalleryIdentityUser</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0bac5bd15e2750f544e20e0834b93610" name="a0bac5bd15e2750f544e20e0834b93610"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bac5bd15e2750f544e20e0834b93610">&#9670;&#160;</a></span>User</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="_program_8cs.html#a0bac5bd15e2750f544e20e0834b93610">User</a> =  <a class="el" href="class_gallery_identity_user.html">GalleryIdentityUser</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae6107bcfbdae76cad8ed933c6a9058d6" name="ae6107bcfbdae76cad8ed933c6a9058d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6107bcfbdae76cad8ed933c6a9058d6">&#9670;&#160;</a></span>UserManager</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> =  Microsoft.AspNetCore.Identity.UserManager&lt;<a class="el" href="class_gallery_identity_user.html">GalleryIdentityUser</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9e515a27bc8d2c3d2fb6fbdb46c5f470" name="a9e515a27bc8d2c3d2fb6fbdb46c5f470"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e515a27bc8d2c3d2fb6fbdb46c5f470">&#9670;&#160;</a></span>AddAuthentication()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">builder.Services. AddAuthentication </td>
          <td>(</td>
          <td class="paramtype">CookieAuthenticationDefaults.&#160;</td>
          <td class="paramname"><em>AuthenticationScheme</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0412687b26e13339ceaf4af6f9ae436a" name="a0412687b26e13339ceaf4af6f9ae436a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0412687b26e13339ceaf4af6f9ae436a">&#9670;&#160;</a></span>AddFilter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">builder.Logging. AddFilter </td>
          <td>(</td>
          <td class="paramtype">&quot;Microsoft.AspNetCore.HttpLogging&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LogLevel.&#160;</td>
          <td class="paramname"><em>Information</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a78451888107c62d4fb56848dfa61cdb7" name="a78451888107c62d4fb56848dfa61cdb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78451888107c62d4fb56848dfa61cdb7">&#9670;&#160;</a></span>AddHttpLogging()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">builder.Services. AddHttpLogging </td>
          <td>(</td>
          <td class="paramtype">options&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">{ options.LoggingFields=HttpLoggingFields.RequestProperties;}&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af2e530ff170a424ae90d56b462193dec" name="af2e530ff170a424ae90d56b462193dec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2e530ff170a424ae90d56b462193dec">&#9670;&#160;</a></span>AddSwaggerGen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">builder.Services. AddSwaggerGen </td>
          <td>(</td>
          <td class="paramtype">options&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">{ options.SwaggerDoc(&quot;v1&quot;, new OpenApiInfo{ Title=&quot;Online Gallery&quot;, Version=&quot;v1&quot; });}&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab688d13d545b936a2774fd43c0f2f578" name="ab688d13d545b936a2774fd43c0f2f578"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab688d13d545b936a2774fd43c0f2f578">&#9670;&#160;</a></span>MapGet() <span class="overload">[1/10]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">application. MapGet </td>
          <td>(</td>
          <td class="paramtype">&quot;/&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">async(HttpContext context, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> userManager)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">{ if(context.User.Identity==null||!context.User.Identity.IsAuthenticated) { return &quot;[Anonymous] Home&quot;;} var user=await userManager.GetUserAsync(context.User);return user==null ? &quot;[Anonymous] Home&quot; :$&quot;[{user.UserName}] Home&quot;;}&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1f40c2c8a9812b3e84528a9944763c31" name="a1f40c2c8a9812b3e84528a9944763c31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f40c2c8a9812b3e84528a9944763c31">&#9670;&#160;</a></span>MapGet() <span class="overload">[2/10]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">application. MapGet </td>
          <td>(</td>
          <td class="paramtype">&quot;/photos&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">async(HttpContext context, <a class="el" href="_program_8cs.html#a39c5fabe9c10f33b72a1835a4f3c2d62">DbContext</a> dbContext)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">{ var photos=dbContext.Pictures.ToList().ConvertAll(p=&gt; new <a class="el" href="_program_8cs.html#a76e5aa3374c7212ebcd368b03d2d0d5e">PhotoDTO</a> { Id=p.Id, userId=p.UserId, content=p.Content, contentType=p.ContentType, fileName=p.FileName });await context.Response.WriteAsJsonAsync(photos);}&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8ee9fbe9ac10789e06a218e70d2d1227" name="a8ee9fbe9ac10789e06a218e70d2d1227"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ee9fbe9ac10789e06a218e70d2d1227">&#9670;&#160;</a></span>MapGet() <span class="overload">[3/10]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">application. MapGet </td>
          <td>(</td>
          <td class="paramtype">&quot;/photos/{photoID}&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">async(int photoID, HttpContext context, <a class="el" href="_program_8cs.html#a39c5fabe9c10f33b72a1835a4f3c2d62">DbContext</a> dbContext)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">{ var photo=await dbContext.Pictures.Where(p=&gt; p.Id==photoID).ToListAsync();if(photo.Count==0) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync($&quot;Photo with id: {photoID} does not exist!&quot;);return;} using(var ms=new MemoryStream(photo[0].Content)) { context.Response.ContentType=photo[0].ContentType;await ms.CopyToAsync(context.Response.Body);} }&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3771d369156388267bf09d253b984138" name="a3771d369156388267bf09d253b984138"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3771d369156388267bf09d253b984138">&#9670;&#160;</a></span>MapGet() <span class="overload">[4/10]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">application. MapGet </td>
          <td>(</td>
          <td class="paramtype">&quot;/photos/{photoID}/user&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">async(int photoID, HttpContext context, <a class="el" href="_program_8cs.html#a39c5fabe9c10f33b72a1835a4f3c2d62">DbContext</a> dbContext)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">{ var photoUserId=await dbContext.Pictures.Where(p=&gt; p.Id==photoID).Select(p=&gt; p.UserId).ToListAsync();if(photoUserId.Count==0) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync($&quot;Photo with id: {photoID} does not exist!&quot;);return;} var photoUser=await dbContext.Users.Where(u=&gt; u.Id==photoUserId[0]).ToListAsync();await context.Response.WriteAsJsonAsync(photoUser);}&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa5f65acedf592f7ee86ef26cb6ddb217" name="aa5f65acedf592f7ee86ef26cb6ddb217"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5f65acedf592f7ee86ef26cb6ddb217">&#9670;&#160;</a></span>MapGet() <span class="overload">[5/10]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">application. MapGet </td>
          <td>(</td>
          <td class="paramtype">&quot;/user&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">async(HttpContext context, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> userManager)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">{ if(context.User.Identity==null||!context.User.Identity.IsAuthenticated) { context.Response.Redirect(&quot;/user/login&quot;);return;} var user=await userManager.GetUserAsync(context.User);if(user==null) { context.Response.Redirect(&quot;/user/login&quot;);return;} context.Response.Redirect($&quot;/users/{user.UserName}&quot;);}&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a56b2e9dceab4023c4f1c9fe69608fe33" name="a56b2e9dceab4023c4f1c9fe69608fe33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56b2e9dceab4023c4f1c9fe69608fe33">&#9670;&#160;</a></span>MapGet() <span class="overload">[6/10]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">application. MapGet </td>
          <td>(</td>
          <td class="paramtype">&quot;/user/login&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">()&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Hello login!&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa89a6f7a6c9be7e31f9e63413364273c" name="aa89a6f7a6c9be7e31f9e63413364273c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa89a6f7a6c9be7e31f9e63413364273c">&#9670;&#160;</a></span>MapGet() <span class="overload">[7/10]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">application. MapGet </td>
          <td>(</td>
          <td class="paramtype">&quot;/user/register&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">()&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Hello register!&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8df212bda1108c6c77af0004a27a9131" name="a8df212bda1108c6c77af0004a27a9131"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8df212bda1108c6c77af0004a27a9131">&#9670;&#160;</a></span>MapGet() <span class="overload">[8/10]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">application. MapGet </td>
          <td>(</td>
          <td class="paramtype">&quot;/users&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">async(HttpContext context, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> userManager)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">{ var users=await userManager.Users.ToListAsync();await context.Response.WriteAsJsonAsync(users);}&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="afd0af5fa5cc8a8d60b2e1ccbd7ccc6c9" name="afd0af5fa5cc8a8d60b2e1ccbd7ccc6c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd0af5fa5cc8a8d60b2e1ccbd7ccc6c9">&#9670;&#160;</a></span>MapGet() <span class="overload">[9/10]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">application. MapGet </td>
          <td>(</td>
          <td class="paramtype">&quot;/users/{username}&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">async(string username, HttpContext context, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> userManager)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">{ var users=await userManager.Users.Where(u=&gt; u.UserName==username).ToListAsync();if(users.Count==0) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync($&quot;User {username} does not exist!&quot;);return;} await context.Response.WriteAsJsonAsync(users[0]);}&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a77287ade3bfe9343303ed0e1148f3079" name="a77287ade3bfe9343303ed0e1148f3079"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77287ade3bfe9343303ed0e1148f3079">&#9670;&#160;</a></span>MapGet() <span class="overload">[10/10]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">application. MapGet </td>
          <td>(</td>
          <td class="paramtype">&quot;/users/{username}/photos&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">async(string username, HttpContext context, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> userManager, <a class="el" href="_program_8cs.html#a39c5fabe9c10f33b72a1835a4f3c2d62">DbContext</a> dbContext)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">{ var users=await userManager.Users.Where(u=&gt; u.UserName==username).ToListAsync();if(users.Count==0) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync($&quot;User {username} does not exist!&quot;);return;} var photos=dbContext.Pictures.Where(p=&gt; p.UserId==users[0].Id).ToList().ConvertAll(p=&gt; new <a class="el" href="_program_8cs.html#a76e5aa3374c7212ebcd368b03d2d0d5e">PhotoDTO</a> { Id=p.Id, userId=p.UserId, content=p.Content, contentType=p.ContentType, fileName=p.FileName });await context.Response.WriteAsJsonAsync(photos);}&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1abf692cc4c9ea3f246c78f6f7bbd307" name="a1abf692cc4c9ea3f246c78f6f7bbd307"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1abf692cc4c9ea3f246c78f6f7bbd307">&#9670;&#160;</a></span>MapPost() <span class="overload">[1/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">application. MapPost </td>
          <td>(</td>
          <td class="paramtype">&quot;/photos/{photoID}/delete&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">async(int photoID, HttpContext context, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> userManager, <a class="el" href="_program_8cs.html#a39c5fabe9c10f33b72a1835a4f3c2d62">DbContext</a> dbContext)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">{ if(context.User.Identity==null||!context.User.Identity.IsAuthenticated) { context.Response.StatusCode=StatusCodes.Status403Forbidden;await context.Response.WriteAsync($&quot;Photo deletion failed!&quot;);return;} var user=await userManager.GetUserAsync(context.User);if(user==null) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync($&quot;Photo deletion failed!&quot;);return;} var photos=await dbContext.Pictures.Where(p=&gt; p.Id==photoID).ToListAsync();if(photos.Count==0) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync($&quot;Photo {photoID} deletion failed!&quot;);return;} else if(photos.Count &gt; 1||photos[0].UserId !=user.Id) { context.Response.StatusCode=StatusCodes.Status403Forbidden;await context.Response.WriteAsync($&quot;Photo {photoID} deletion forbidden!&quot;);return;} dbContext.Pictures.RemoveRange(photos);await dbContext.SaveChangesAsync();await context.Response.WriteAsync($&quot;Photo {photoID} deleted!&quot;);}&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac7bf11b36845cb42b98150d78f224961" name="ac7bf11b36845cb42b98150d78f224961"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7bf11b36845cb42b98150d78f224961">&#9670;&#160;</a></span>MapPost() <span class="overload">[2/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">application. MapPost </td>
          <td>(</td>
          <td class="paramtype">&quot;/photos/{photoID}/update&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">async(int photoID, HttpContext context, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> userManager, <a class="el" href="_program_8cs.html#a39c5fabe9c10f33b72a1835a4f3c2d62">DbContext</a> dbContext)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">{ if(context.User.Identity==null||!context.User.Identity.IsAuthenticated) { context.Response.StatusCode=StatusCodes.Status403Forbidden;await context.Response.WriteAsync($&quot;Photo update forbidden!&quot;);return;} var user=await userManager.GetUserAsync(context.User);if(user==null) { context.Response.StatusCode=StatusCodes.Status403Forbidden;await context.Response.WriteAsync($&quot;Photo update forbidden!&quot;);return;} if(context.Request.ContentLength==null||context.Request.ContentType==null) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync($&quot;Photo update failed!&quot;);return;} var pic=await dbContext.Pictures.Where(p=&gt; p.Id==photoID).FirstOrDefaultAsync();if(pic==null) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync($&quot;Photo does not exist!&quot;);return;} if(pic.UserId !=user.Id) { context.Response.StatusCode=StatusCodes.Status403Forbidden;await context.Response.WriteAsync($&quot;Photo update forbidden!&quot;);return;} using(var ms=new MemoryStream()) { await context.Request.Body.CopyToAsync(ms);pic.Content=ms.ToArray();pic.ContentType=context.Request.ContentType;dbContext.Update(pic);await dbContext.SaveChangesAsync();await context.Response.WriteAsync($&quot;Photo {pic.FileName} successfully updated!&quot;);} }&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a30bd0f3af6d42569507b1ab6795afeb9" name="a30bd0f3af6d42569507b1ab6795afeb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30bd0f3af6d42569507b1ab6795afeb9">&#9670;&#160;</a></span>MapPost() <span class="overload">[3/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">application. MapPost </td>
          <td>(</td>
          <td class="paramtype">&quot;/photos/{photoName}/create&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">async(string photoName, HttpContext context, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> userManager, <a class="el" href="_program_8cs.html#a39c5fabe9c10f33b72a1835a4f3c2d62">DbContext</a> dbContext)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">{ if(context.User.Identity==null||!context.User.Identity.IsAuthenticated) { context.Response.StatusCode=StatusCodes.Status403Forbidden;await context.Response.WriteAsync($&quot;Photo creation failed!&quot;);return;} var user=await userManager.GetUserAsync(context.User);if(user==null) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync($&quot;Photo creation failed!&quot;);return;} if(context.Request.ContentLength==null||context.Request.ContentType==null) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync($&quot;Photo creation failed!&quot;);return;} using(var ms=new MemoryStream()) { await context.Request.Body.CopyToAsync(ms);var content=ms.ToArray();<a class="el" href="class_photo.html">Photo</a> pic=new <a class="el" href="class_photo.html">Photo</a>(user, photoName, content, context.Request.ContentType);dbContext.Add(pic);user.Pictures.Add(pic);await dbContext.SaveChangesAsync();await context.Response.WriteAsync($&quot;Photo {photoName} successfully created!&quot;);} }&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3b11cc6ba5b37f63a1a74cff86a73a69" name="a3b11cc6ba5b37f63a1a74cff86a73a69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b11cc6ba5b37f63a1a74cff86a73a69">&#9670;&#160;</a></span>MapPost() <span class="overload">[4/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">application. MapPost </td>
          <td>(</td>
          <td class="paramtype">&quot;/user/delete&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">async(HttpContext context, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> userManager, <a class="el" href="_program_8cs.html#a39c5fabe9c10f33b72a1835a4f3c2d62">DbContext</a> dbContext)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">{ if(context.User.Identity==null||!context.User.Identity.IsAuthenticated) { context.Response.StatusCode=StatusCodes.Status403Forbidden;await context.Response.WriteAsync($&quot;User delete failed!&quot;);return;} var user=await userManager.GetUserAsync(context.User);if(user==null) { context.Response.StatusCode=StatusCodes.Status403Forbidden;await context.Response.WriteAsync($&quot;User delete failed!&quot;);return;} await dbContext.Entry(user).Collection(u=&gt; u.Pictures).LoadAsync();var result=await userManager.DeleteAsync(user);if(result.Succeeded) { await dbContext.SaveChangesAsync();await context.Response.WriteAsync(&quot;User deleted Successfully!&quot;);} else { context.Response.StatusCode=400;await context.Response.WriteAsync(&quot;User deletion failed:\n\t - &quot;+string.Join(&quot;\n\t - &quot;, result.Errors.Select(e=&gt; e.Description)));};}&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a21c27872755e13081d1db2efaf4689f0" name="a21c27872755e13081d1db2efaf4689f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21c27872755e13081d1db2efaf4689f0">&#9670;&#160;</a></span>MapPost() <span class="overload">[5/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">application. MapPost </td>
          <td>(</td>
          <td class="paramtype">&quot;/user/login&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">async(HttpContext context, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a>, <a class="el" href="_program_8cs.html#a36bfdee1eb2c27cb0f5c276baaf70494">SignInManager</a> signInManager)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">{ var username=context.Request.Form[&quot;username&quot;];var password=context.Request.Form[&quot;password&quot;];if(StringValues.IsNullOrEmpty(username)||StringValues.IsNullOrEmpty(password)) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync(&quot;Log in failed!&quot;);return;} var user=await UserManager.FindByNameAsync(username);if(user==null) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync(&quot;Log in failed!&quot;);return;} var result=await signInManager.PasswordSignInAsync(user, password, false, false);if(result.Succeeded) { context.Response.StatusCode=StatusCodes.Status200OK;context.Response.Redirect(&quot;/user&quot;);} else { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync(&quot;Log in failed!&quot;);} }&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae7d912025db8547b4d7b1e071713f133" name="ae7d912025db8547b4d7b1e071713f133"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7d912025db8547b4d7b1e071713f133">&#9670;&#160;</a></span>MapPost() <span class="overload">[6/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">application. MapPost </td>
          <td>(</td>
          <td class="paramtype">&quot;/user/logout&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">async(HttpContext context, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> userManager, <a class="el" href="_program_8cs.html#a36bfdee1eb2c27cb0f5c276baaf70494">SignInManager</a> signInManager)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">{ if(context.User.Identity==null||!context.User.Identity.IsAuthenticated) { context.Response.StatusCode=StatusCodes.Status400BadRequest;return &quot;Already logged out!&quot;;} var user=await userManager.GetUserAsync(context.User);if(user==null) { context.Response.StatusCode=StatusCodes.Status400BadRequest;return &quot;Already logged out!&quot;;} await signInManager.SignOutAsync();return &quot;Logged out successfully!&quot;;}&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0bb68c1364de4dba6b1620966d499d54" name="a0bb68c1364de4dba6b1620966d499d54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bb68c1364de4dba6b1620966d499d54">&#9670;&#160;</a></span>MapPost() <span class="overload">[7/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">application. MapPost </td>
          <td>(</td>
          <td class="paramtype">&quot;/user/register&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">async(HttpContext context, <a class="el" href="_program_8cs.html#a13515bc8f9c48f16e3182807bc260e15">RoleManager</a> roleManager, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> userManager)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">{ var username=context.Request.Form[&quot;username&quot;];var password=context.Request.Form[&quot;password&quot;];if(StringValues.IsNullOrEmpty(username)||StringValues.IsNullOrEmpty(password)) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync(&quot;Registration failed!&quot;);return;} var user=new <a class="el" href="_program_8cs.html#a0bac5bd15e2750f544e20e0834b93610">User</a> { UserName=username };var result=await userManager.CreateAsync(user, password);if(result.Succeeded) { await context.Response.WriteAsync(&quot;User Registered Successfully!&quot;);} else { context.Response.StatusCode=400;await context.Response.WriteAsync(&quot;User registration failed:\n\t - &quot;+string.Join(&quot;\n\t - &quot;, result.Errors.Select(e=&gt; e.Description)));};}&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae8308c6d187a2ee938790a7066b93447" name="ae8308c6d187a2ee938790a7066b93447"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8308c6d187a2ee938790a7066b93447">&#9670;&#160;</a></span>MapPost() <span class="overload">[8/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">application. MapPost </td>
          <td>(</td>
          <td class="paramtype">&quot;/user/update&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">async(HttpContext context, <a class="el" href="_program_8cs.html#ae6107bcfbdae76cad8ed933c6a9058d6">UserManager</a> userManager, <a class="el" href="_program_8cs.html#a39c5fabe9c10f33b72a1835a4f3c2d62">DbContext</a> dbContext)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">{ if(context.User.Identity==null||!context.User.Identity.IsAuthenticated) { context.Response.StatusCode=StatusCodes.Status403Forbidden;await context.Response.WriteAsync($&quot;User update failed!&quot;);return;} var user=await userManager.GetUserAsync(context.User);if(user==null) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync($&quot;User update failed!&quot;);return;} var username=context.Request.Form[&quot;username&quot;];if(StringValues.IsNullOrEmpty(username)) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync(&quot;User update failed!&quot;);return;} else if(username==user.UserName||dbContext.Users.Where(u=&gt; u.UserName==username).Count() &gt; 0) { context.Response.StatusCode=StatusCodes.Status400BadRequest;await context.Response.WriteAsync(&quot;User update failed!&quot;);return;} user.UserName=username;dbContext.Update(user);await dbContext.SaveChangesAsync();await context.Response.WriteAsync(&quot;Username successfully updated!&quot;);}&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae2c5618318260608a562239c7a326f88" name="ae2c5618318260608a562239c7a326f88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2c5618318260608a562239c7a326f88">&#9670;&#160;</a></span>Run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">application. Run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa87899a7e0d5fc705f3bba25f807861b" name="aa87899a7e0d5fc705f3bba25f807861b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa87899a7e0d5fc705f3bba25f807861b">&#9670;&#160;</a></span>UseHttpLogging()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">application. UseHttpLogging </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab20294faa737ddf2b8a2446f796e491b" name="ab20294faa737ddf2b8a2446f796e491b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab20294faa737ddf2b8a2446f796e491b">&#9670;&#160;</a></span>application</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var application = builder.Build()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2f78352277081c620fd4cf92a5ce15e5" name="a2f78352277081c620fd4cf92a5ce15e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f78352277081c620fd4cf92a5ce15e5">&#9670;&#160;</a></span>builder</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var builder = WebApplication.CreateBuilder(args)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a76e5aa3374c7212ebcd368b03d2d0d5e" name="a76e5aa3374c7212ebcd368b03d2d0d5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76e5aa3374c7212ebcd368b03d2d0d5e">&#9670;&#160;</a></span>PhotoDTO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">record PhotoDTO</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="_program_8cs.html">Program.cs</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
